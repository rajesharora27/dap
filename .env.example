# =============================================================================
# DAP ENVIRONMENT CONFIGURATION (Single Source of Truth)
# =============================================================================
# Copy this file to .env and fill in the values for your environment.
#
# IMPORTANT:
# - Do NOT commit .env (it is gitignored).
# - Secrets (JWT_SECRET, Cisco AI creds, DB passwords) must live ONLY in .env on each machine.
# - Mac demo uses local Postgres and will sync .env -> backend/.env automatically via ./dap start.

# =============================================================================
# Core
# =============================================================================
NODE_ENV=production
HOST=0.0.0.0
PORT=4000
BACKEND_PORT=4000

# =============================================================================
# Database
# =============================================================================
DB_PROVIDER=postgresql
# Mac demo (Homebrew Postgres):
# DATABASE_URL=postgresql://<mac_username>@localhost:5432/dap?schema=public&connection_limit=5
# Linux / Stage / Prod: set appropriate host/user/password
DATABASE_URL=postgresql://user:password@localhost:5432/dap?schema=public&connection_limit=20

# =============================================================================
# Auth / Security
# =============================================================================
# Must be >= 32 chars
JWT_SECRET=CHANGE-THIS-TO-A-SECURE-RANDOM-STRING-MIN-32-CHARS
JWT_EXPIRES_IN=24h

# Auth toggles
AUTH_BYPASS=0
AUTH_FALLBACK=0

# =============================================================================
# CORS / URLs
# =============================================================================
FRONTEND_PORT=5173
FRONTEND_URL=http://localhost:5173
CORS_ORIGIN=http://localhost:5173

# =============================================================================
# Logging
# =============================================================================
LOG_LEVEL=info
LOG_PRETTY=0

# =============================================================================
# Feature Flags
# =============================================================================
GRAPHQL_PLAYGROUND=0
APOLLO_INTROSPECTION=0
ENABLE_CACHE=1
SHOW_DEV_MENU=0

# =============================================================================
# Rate Limiting
# =============================================================================
RATE_LIMIT_ENABLED=1
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=5000
RATE_LIMIT_GRAPHQL_MAX=10000

# =============================================================================
# Data Management
# =============================================================================
AUTO_SEED=0
SEED_ON_START=0
RESET_DB=0

# =============================================================================
# AI Agent / LLM
# =============================================================================
AI_AGENT_ENABLED=1
# Options: cisco, openai, gemini, anthropic, mock
LLM_PROVIDER=cisco
AI_DEBUG_MODE=0
LLM_MAX_TOKENS=4096
LLM_TIMEOUT=60000

# Cisco AI Gateway (required when LLM_PROVIDER=cisco)
CISCO_AI_TIER=free
CISCO_AI_MODEL=gpt-4.1
CISCO_AI_CLIENT_ID=
CISCO_AI_CLIENT_SECRET=
CISCO_AI_API_KEY=
CISCO_AI_TOKEN_URL=https://id.cisco.com/oauth2/default/v1/token
CISCO_AI_ENDPOINT=https://chat-ai.cisco.com
CISCO_AI_API_VERSION=2023-12-01-preview
