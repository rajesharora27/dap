# =============================================================================
# DAP CONSOLIDATED CONFIGURATION - DEVELOPMENT
# Source of Truth: /data/dap/.env.development
# 
# This file is the master configuration. On restart, it is synced to:
#   - backend/.env
#   - frontend/.env
#   - .env
#
# Run ./dap restart to apply changes.
# =============================================================================

# =============================================================================
#                           COMMON CONFIGURATION
#               (Used by both Frontend and Backend)
# =============================================================================

# -----------------------------------------------------------------------------
# Core Environment
# -----------------------------------------------------------------------------
# NODE_ENV: Application runtime mode
#   - development: Enables debug features, verbose logging, hot reload
#   - production: Optimized builds, minimal logging, security hardened
#   - test: Used for automated testing
NODE_ENV=development

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# DB_PROVIDER: Database type (postgresql, mysql, sqlite)
DB_PROVIDER=postgresql

# DATABASE_URL: PostgreSQL connection string
#   Format: postgres://USER:PASSWORD@HOST:PORT/DATABASE?schema=SCHEMA
#   For Docker: Use container name or localhost (if port-forwarded)
DATABASE_URL=postgres://postgres:postgres@localhost:5432/dap?schema=public

# DB_CONTAINER_NAME: Docker container name for the database
DB_CONTAINER_NAME=dap_db_1

# -----------------------------------------------------------------------------
# Authentication & Security (Shared)
# -----------------------------------------------------------------------------
# JWT_SECRET: Secret key for signing JWT tokens
#   ⚠️ CRITICAL: Change this in production!
JWT_SECRET=dev-secret-not-for-production

# JWT_EXPIRES_IN: Token expiration time (e.g., 7d, 24h, 60m)
JWT_EXPIRES_IN=7d

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# ALLOWED_ORIGINS: Comma-separated list of allowed CORS origins
#   Add your development, staging, and production URLs
ALLOWED_ORIGINS=http://dev.rajarora.csslab,http://172.22.156.32,http://localhost,https://myapps.cxsaaslab.com,http://prod.rajarora.csslab,http://172.22.156.33,https://dap-8321890.ztna.sse.cisco.io

# CORS_ORIGIN: Shorthand CORS origin (*=allow all, specific URL for production)
CORS_ORIGIN=*


# =============================================================================
#                          FRONTEND CONFIGURATION
#                      (Vite / React Environment)
# =============================================================================

# -----------------------------------------------------------------------------
# Frontend Server Settings
# -----------------------------------------------------------------------------
# FRONTEND_HOST: Network interface to bind the dev server
#   - 0.0.0.0 allows external access (required for reverse proxy)
#   - localhost restricts to local machine only
FRONTEND_HOST=0.0.0.0

# FRONTEND_PORT: Port for Vite dev server (default: 5173)
FRONTEND_PORT=5173

# FRONTEND_URL: Base URL for the frontend application
FRONTEND_URL=http://dev.rajarora.csslab/dap/

# -----------------------------------------------------------------------------
# Vite Environment Variables (exposed via import.meta.env)
# -----------------------------------------------------------------------------
# VITE_BASE_PATH: URL path prefix for the app (must match Apache/Nginx config)
VITE_BASE_PATH=/dap/

# VITE_GRAPHQL_ENDPOINT: GraphQL API path (relative to base path)
VITE_GRAPHQL_ENDPOINT=/graphql

# VITE_FRONTEND_URL: Public URL for the frontend (for OAuth callbacks, etc.)
VITE_FRONTEND_URL=https://dap-8321890.ztna.sse.cisco.io

# VITE_SHOW_DEV_MENU: Show developer tools menu in the UI (true/false)
VITE_SHOW_DEV_MENU=true


# =============================================================================
#                          BACKEND CONFIGURATION
#                    (Node.js / Express / Apollo Server)
# =============================================================================

# -----------------------------------------------------------------------------
# Backend Server Settings
# -----------------------------------------------------------------------------
# BACKEND_HOST: Network interface to bind the backend server
BACKEND_HOST=0.0.0.0

# BACKEND_PORT: Port for the Node.js/Express/Apollo server
BACKEND_PORT=4000

# BACKEND_URL: Public URL for the backend API
BACKEND_URL=http://dev.rajarora.csslab/dap/

# GRAPHQL_ENDPOINT: Full URL to the GraphQL endpoint
GRAPHQL_ENDPOINT=https://dev.rajarora.csslab/dap/graphql

# HOST/PORT: Alternative names (used by some libraries)
HOST=0.0.0.0
PORT=4000

# -----------------------------------------------------------------------------
# Authentication & Authorization (Backend-specific)
# -----------------------------------------------------------------------------
# AUTH_BYPASS: Bypass authentication entirely (1=yes, 0=no)
#   ⚠️ Only for development! Never enable in production
AUTH_BYPASS=0

# AUTH_FALLBACK: Use fallback user when auth fails (1=yes, 0=no)
AUTH_FALLBACK=0

# -----------------------------------------------------------------------------
# RBAC (Role-Based Access Control)
# -----------------------------------------------------------------------------
# RBAC_STRICT: Enforce strict permission checks (1=yes, 0=no)
#   When 0, allows more permissive access for development
RBAC_STRICT=0

# RBAC_WARN: Log warnings when RBAC checks are bypassed (1=yes, 0=no)
RBAC_WARN=1

# RBAC_AUTO_GRANT: Auto-grant permissions to admin users (1=yes, 0=no)
RBAC_AUTO_GRANT=1

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
# RATE_LIMIT_ENABLED: Enable request rate limiting (1=yes, 0=no)
RATE_LIMIT_ENABLED=0

# RATE_LIMIT_WINDOW_MS: Time window for rate limiting in milliseconds (default: 15 min)
RATE_LIMIT_WINDOW_MS=900000

# RATE_LIMIT_MAX: Max requests per window for general endpoints
RATE_LIMIT_MAX=10000

# RATE_LIMIT_GRAPHQL_MAX: Max GraphQL requests per window
RATE_LIMIT_GRAPHQL_MAX=5000

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# LOG_LEVEL: Minimum log level (error, warn, info, debug, trace)
LOG_LEVEL=debug

# LOG_PRETTY: Pretty-print logs with colors (1=yes, 0=no)
#   Set to 0 in production for JSON logs
LOG_PRETTY=1

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
# GRAPHQL_PLAYGROUND: Enable GraphQL Playground IDE at /graphql (1=yes, 0=no)
GRAPHQL_PLAYGROUND=1

# APOLLO_INTROSPECTION: Allow GraphQL schema introspection (1=yes, 0=no)
#   Required for Playground. Disable in production for security
APOLLO_INTROSPECTION=1

# ENABLE_CACHE: Enable caching layer (1=yes, 0=no)
ENABLE_CACHE=0

# SHOW_DEV_MENU: Show developer menu in the UI (1=yes, 0=no)
SHOW_DEV_MENU=1

# -----------------------------------------------------------------------------
# Database Management
# -----------------------------------------------------------------------------
# AUTO_SEED: Automatically seed database on first run (1=yes, 0=no)
AUTO_SEED=1

# SEED_ON_START: Run seed script every time backend starts (1=yes, 0=no)
#   Useful for development, disable in production
SEED_ON_START=0

# RESET_DB: Reset database on startup (1=yes, 0=no)
#   ⚠️ DESTRUCTIVE: Wipes all data! Use with caution
RESET_DB=0

# -----------------------------------------------------------------------------
# AI Agent / LLM Configuration
# -----------------------------------------------------------------------------
# AI_AGENT_ENABLED: Enable the AI Assistant feature (1=yes, 0=no)
AI_AGENT_ENABLED=1

# LLM_PROVIDER: Which LLM provider to use
#   Options: mock, openai, gemini, anthropic, cisco
#   - mock: Returns predictable responses (for testing)
#   - cisco: Cisco AI Gateway (Enterprise, recommended)
#   - openai: OpenAI API (requires OPENAI_API_KEY)
#   - gemini: Google Gemini (requires GEMINI_API_KEY)
#   - anthropic: Anthropic Claude (requires ANTHROPIC_API_KEY)
LLM_PROVIDER=cisco

# AI_DEBUG_MODE: Enable verbose AI debug logging (1=yes, 0=no)
AI_DEBUG_MODE=1

# LLM_MAX_TOKENS: Maximum tokens in LLM responses (default: 2000)
LLM_MAX_TOKENS=32768

# LLM_TIMEOUT: Timeout for LLM requests in milliseconds (default: 30s)
LLM_TIMEOUT=30000

# -----------------------------------------------------------------------------
# Cisco AI Gateway Configuration
# -----------------------------------------------------------------------------
# Cisco AI is the enterprise LLM gateway. Get credentials from:
# https://chat-ai.cisco.com or your Cisco AI administrator
#
# TIER INFORMATION (as of 2024):
# ┌────────────────────┬──────────────┬───────────────────┬──────────────────┐
# │ Tier               │ Model        │ Requests/min      │ Peak Tokens      │
# ├────────────────────┼──────────────┼───────────────────┼──────────────────┤
# │ Free               │ GPT-4o mini  │ 30                │ 200K             │
# │ Free               │ GPT-4.1      │ 15                │ 120K             │
# │ Pay-as-you-use     │ GPT-4o mini  │ Unlimited         │ 1M               │
# │ Pay-as-you-use     │ GPT-4o       │ Unlimited         │ 1M               │
# └────────────────────┴──────────────┴───────────────────┴──────────────────┘
#
# CISCO_AI_TIER: Pricing tier for Cisco AI
#   Options: free, payg (pay-as-you-go)
#   - free: Limited requests/min, suitable for development/testing
#   - payg: Unlimited requests, billed per token, for production use
CISCO_AI_TIER=free

# CISCO_AI_MODEL: Model to use for queries
#   Options depend on your tier:
#   - Free tier: gpt-4o-mini, gpt-4.1
#   - Pay-as-you-go: gpt-4o-mini, gpt-4o
CISCO_AI_MODEL=gpt-4.1

# CISCO_AI_CLIENT_ID: OAuth2 Client ID from Cisco AI registration
CISCO_AI_CLIENT_ID=cG9jLXRyaWFsMjAyNEp1bHkyMwff_07671522d7f61b4aa0a617578891ee

# CISCO_AI_CLIENT_SECRET: OAuth2 Client Secret (keep secure!)
CISCO_AI_CLIENT_SECRET=MzCIc9T5eSUAnB19-p8b2cmxUW3Oagd3XRLOf-3ZvaML_ZMKuE8RUkZaMfr31A__

# CISCO_AI_API_KEY: Application-specific API key
CISCO_AI_API_KEY=egai-prd-cxpm-cxlx-usecases-improv-adopt-jrny-1

# CISCO_AI_API_VERSION: API version for compatibility (default: 2023-12-01-preview)
CISCO_AI_API_VERSION=2023-12-01-preview

# CISCO_AI_TOKEN_URL: OAuth2 token endpoint for Cisco identity
CISCO_AI_TOKEN_URL=https://id.cisco.com/oauth2/default/v1/token

# CISCO_AI_ENDPOINT: Cisco AI Gateway API endpoint
CISCO_AI_ENDPOINT=https://chat-ai.cisco.com

# -----------------------------------------------------------------------------
# Optional: OpenAI Configuration (if using OpenAI provider)
# -----------------------------------------------------------------------------
# OPENAI_API_KEY: Your OpenAI API key (get from https://platform.openai.com)
# OPENAI_API_KEY=sk-...

# OPENAI_MODEL: OpenAI model to use (default: gpt-4o)
# OPENAI_MODEL=gpt-4o

# -----------------------------------------------------------------------------
# Optional: Google Gemini Configuration (if using Gemini provider)
# -----------------------------------------------------------------------------
# GEMINI_API_KEY: Your Google AI API key (get from https://aistudio.google.com)
# GEMINI_API_KEY=...

# GEMINI_MODEL: Gemini model to use (default: gemini-1.5-pro)
# GEMINI_MODEL=gemini-1.5-pro

# -----------------------------------------------------------------------------
# Optional: Anthropic Configuration (if using Anthropic provider)
# -----------------------------------------------------------------------------
# ANTHROPIC_API_KEY: Your Anthropic API key (get from https://console.anthropic.com)
# ANTHROPIC_API_KEY=sk-ant-...

# ANTHROPIC_MODEL: Anthropic model to use (default: claude-3-5-sonnet-20241022)
# ANTHROPIC_MODEL=claude-3-5-sonnet-20241022


# =============================================================================
#                         DEVTOOLS CONFIGURATION
#              (Development Only - NEVER enable in production!)
# =============================================================================

# DEVTOOLS_ENABLED: Enable the development tools server (1=yes, 0=no)
#   When enabled, provides REST API for:
#   - Running tests (npm test, coverage reports)
#   - Database management (migrate, seed, reset)
#   - System logs and diagnostics
#   - Build and deployment tools
DEVTOOLS_ENABLED=1

# DEVTOOLS_PORT: Port for the DevTools server (separate from main backend)
#   Default: 4001 (main backend runs on 4000)
DEVTOOLS_PORT=4001

# DEVTOOLS_REQUIRE_AUTH: Require admin authentication for DevTools (1=yes, 0=no)
#   Even in development, this adds an extra layer of security.
#   Set to 0 only for local-only development.
DEVTOOLS_REQUIRE_AUTH=1

# DEVTOOLS_ALLOWED_IPS: Comma-separated IPs allowed to access DevTools
#   Default: localhost only (127.0.0.1, ::1)
#   Add your development machine IP if needed
# DEVTOOLS_ALLOWED_IPS=127.0.0.1,::1,192.168.1.100

# DEVTOOLS_LOG_LEVEL: Logging level for DevTools (debug, info, warn, error)
DEVTOOLS_LOG_LEVEL=debug

# DEVTOOLS_MAX_LOG_ENTRIES: Maximum log entries to keep in memory
DEVTOOLS_MAX_LOG_ENTRIES=1000

# DEVTOOLS_TEST_TIMEOUT: Timeout for test runs in milliseconds (default: 2 min)
DEVTOOLS_TEST_TIMEOUT=120000

# DEVTOOLS_BUILD_TIMEOUT: Timeout for build operations in milliseconds (default: 5 min)
DEVTOOLS_BUILD_TIMEOUT=300000

# DEVTOOLS_TEST_DATABASE: Separate database URL for running tests
#   Using a separate test database prevents tests from wiping development data
DEVTOOLS_TEST_DATABASE=postgres://postgres:postgres@localhost:5432/dap_test?schema=public
