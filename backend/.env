# =============================================================================
# DAP CONSOLIDATED CONFIGURATION - PRODUCTION
# Source of Truth: /data/dap/.env.production
# 
# ⚠️ IMPORTANT: Replace all placeholder values before deploying!
# Copy this file to the production server and update all values marked with
# "CHANGE THIS" or empty values before starting the application.
# =============================================================================

# -----------------------------------------------------------------------------
# Core Environment
# -----------------------------------------------------------------------------
# NODE_ENV: Application runtime mode
#   - production: Optimized builds, minimal logging, security hardened
#   ⚠️ Must be "production" for production deployments
NODE_ENV=production

# -----------------------------------------------------------------------------
# Frontend Configuration (Vite)
# -----------------------------------------------------------------------------
# FRONTEND_HOST: Network interface to bind (0.0.0.0 for all interfaces)
FRONTEND_HOST=0.0.0.0

# FRONTEND_PORT: Port for serving static files (usually behind reverse proxy)
FRONTEND_PORT=5173

# FRONTEND_URL: Public URL for the frontend application
FRONTEND_URL=https://myapps.cxsaaslab.com/dap/

# Vite Environment Variables (Must start with VITE_)
# VITE_BASE_PATH: URL path prefix for the app
VITE_BASE_PATH=/dap/

# VITE_GRAPHQL_ENDPOINT: GraphQL API path (full path for production)
VITE_GRAPHQL_ENDPOINT=/dap/graphql

# VITE_FRONTEND_URL: Public URL for the frontend (for OAuth callbacks, etc.)
VITE_FRONTEND_URL=https://myapps.cxsaaslab.com/dap/

# VITE_SHOW_DEV_MENU: Show developer tools menu in the UI
#   ⚠️ Must be false in production!
VITE_SHOW_DEV_MENU=false

# -----------------------------------------------------------------------------
# Backend Configuration
# -----------------------------------------------------------------------------
# BACKEND_HOST: Network interface for the backend server
BACKEND_HOST=0.0.0.0

# BACKEND_PORT: Port for the Node.js/Express/Apollo server
BACKEND_PORT=4000

# BACKEND_URL: Public URL for the backend API
BACKEND_URL=https://myapps.cxsaaslab.com/dap/

# GRAPHQL_ENDPOINT: Full URL to the GraphQL endpoint
GRAPHQL_ENDPOINT=https://myapps.cxsaaslab.com/dap/graphql

# HOST/PORT: Alternative names (used by some libraries)
HOST=0.0.0.0
PORT=4000

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# DB_PROVIDER: Database type (postgresql, mysql, sqlite)
DB_PROVIDER=postgresql

# DATABASE_URL: PostgreSQL connection string
#   Format: postgres://USER:PASSWORD@HOST:PORT/DATABASE?schema=SCHEMA
#   ⚠️ Use strong credentials in production!
DATABASE_URL=postgresql://dap:dap_prod_secure_2024!@localhost:5432/dap?schema=public

# DB_CONTAINER_NAME: Docker container name for the database
DB_CONTAINER_NAME=dap_db_1

# -----------------------------------------------------------------------------
# Authentication & Security
# -----------------------------------------------------------------------------
# JWT_SECRET: Secret key for signing JWT tokens
#   ⚠️ CRITICAL: Change this to a secure random string (min 32 chars)!
#   Generate with: openssl rand -hex 32
JWT_SECRET=CHANGE-THIS-TO-A-SECURE-RANDOM-STRING-MIN-32-CHARS

# JWT_EXPIRES_IN: Token expiration time (shorter in production)
JWT_EXPIRES_IN=24h

# AUTH_BYPASS: Bypass authentication (1=yes, 0=no)
#   ⚠️ Must be 0 in production!
AUTH_BYPASS=0

# AUTH_FALLBACK: Use fallback user when auth fails (1=yes, 0=no)
#   ⚠️ Must be 0 in production!
AUTH_FALLBACK=0

# -----------------------------------------------------------------------------
# RBAC (Role-Based Access Control)
# -----------------------------------------------------------------------------
# RBAC_STRICT: Enforce strict permission checks (1=yes, 0=no)
#   ⚠️ Should be 1 in production!
RBAC_STRICT=1

# RBAC_WARN: Log warnings when RBAC checks are bypassed
RBAC_WARN=0

# RBAC_AUTO_GRANT: Auto-grant permissions to admin users
#   ⚠️ Should be 0 in production!
RBAC_AUTO_GRANT=0

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# ALLOWED_ORIGINS: Comma-separated list of allowed CORS origins
#   ⚠️ Only include trusted production domains!
ALLOWED_ORIGINS=https://dap-8321890.ztna.sse.cisco.io,https://myapps.cxsaaslab.com,http://prod.rajarora.csslab,http://172.22.156.33

# CORS_ORIGIN: Specific allowed origin (more restrictive than *)
CORS_ORIGIN=https://dev.rajarora.cxsaaslab.com
FRONTEND_URL=https://dev.rajarora.cxsaaslab.com

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
# RATE_LIMIT_ENABLED: Enable request rate limiting
#   ⚠️ Should be 1 in production!
RATE_LIMIT_ENABLED=1

# RATE_LIMIT_WINDOW_MS: Time window for rate limiting (15 minutes)
RATE_LIMIT_WINDOW_MS=900000

# RATE_LIMIT_MAX: Max requests per window (lower for production security)
RATE_LIMIT_MAX=100

# RATE_LIMIT_GRAPHQL_MAX: Max GraphQL requests per window
RATE_LIMIT_GRAPHQL_MAX=300

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# LOG_LEVEL: Minimum log level (info or warn for production)
LOG_LEVEL=info

# LOG_PRETTY: Pretty-print logs with colors
#   ⚠️ Should be 0 in production (JSON logs for log aggregation)
LOG_PRETTY=0

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
# GRAPHQL_PLAYGROUND: Enable GraphQL Playground IDE
#   ⚠️ Should be 0 in production!
GRAPHQL_PLAYGROUND=0

# APOLLO_INTROSPECTION: Allow GraphQL schema introspection
#   ⚠️ Should be 0 in production (security risk)!
APOLLO_INTROSPECTION=0

# ENABLE_CACHE: Enable caching layer
ENABLE_CACHE=1

# SHOW_DEV_MENU: Show developer menu in the UI
#   ⚠️ Must be 0 in production!
SHOW_DEV_MENU=0

# -----------------------------------------------------------------------------
# Database Management
# -----------------------------------------------------------------------------
# AUTO_SEED: Automatically seed database
#   ⚠️ Should be 0 in production!
AUTO_SEED=0

# SEED_ON_START: Run seed script on startup
#   ⚠️ Should be 0 in production!
SEED_ON_START=0

# RESET_DB: Reset database on startup
#   ⚠️ DANGEROUS! Must be 0 in production!
RESET_DB=0

# -----------------------------------------------------------------------------
# AI Agent / LLM Configuration
# -----------------------------------------------------------------------------
# AI_AGENT_ENABLED: Enable the AI Assistant feature (1=yes, 0=no)
AI_AGENT_ENABLED=1

# LLM_PROVIDER: Which LLM provider to use
#   Options: cisco, openai, gemini, anthropic
#   - cisco: Cisco AI Gateway (Enterprise, recommended for Cisco)
#   - openai: OpenAI API (requires OPENAI_API_KEY)
#   - gemini: Google Gemini (requires GEMINI_API_KEY)
#   - anthropic: Anthropic Claude (requires ANTHROPIC_API_KEY)
LLM_PROVIDER=cisco

# AI_DEBUG_MODE: Enable verbose AI debug logging
#   ⚠️ Should be 0 in production!
AI_DEBUG_MODE=0

# LLM_MAX_TOKENS: Maximum tokens in LLM responses
LLM_MAX_TOKENS=32768

# LLM_TIMEOUT: Timeout for LLM requests in milliseconds
LLM_TIMEOUT=30000

# -----------------------------------------------------------------------------
# Cisco AI Gateway Configuration (Recommended for Production)
# -----------------------------------------------------------------------------
# Get credentials from https://chat-ai.cisco.com or your Cisco AI administrator
#
# TIER INFORMATION (as of 2024):
# ┌────────────────────┬──────────────┬───────────────────┬──────────────────┐
# │ Tier               │ Model        │ Requests/min      │ Peak Tokens      │
# ├────────────────────┼──────────────┼───────────────────┼──────────────────┤
# │ Free               │ GPT-4o mini  │ 30                │ 200K             │
# │ Free               │ GPT-4.1      │ 15                │ 120K             │
# │ Pay-as-you-use     │ GPT-4o mini  │ Unlimited         │ 1M               │
# │ Pay-as-you-use     │ GPT-4o       │ Unlimited         │ 1M               │
# └────────────────────┴──────────────┴───────────────────┴──────────────────┘
#
# CISCO_AI_TIER: Pricing tier for Cisco AI
#   Options: free, payg (pay-as-you-go)
#   - free: Limited requests/min, suitable for development/light production
#   - payg: Unlimited requests, billed per token, recommended for production
CISCO_AI_TIER=free

# CISCO_AI_MODEL: Model to use for queries
#   Free tier: gpt-4o-mini, gpt-4.1
#   Pay-as-you-go: gpt-4o-mini, gpt-4o (recommended)
CISCO_AI_MODEL=gpt-4.1

# CISCO_AI_CLIENT_ID: OAuth2 Client ID from Cisco AI registration
#   ⚠️ Required! Get from your Cisco AI administrator
CISCO_AI_CLIENT_ID=cG9jLXRyaWFsMjAyNEp1bHkyMwff_07671522d7f61b4aa0a617578891ee

# CISCO_AI_CLIENT_SECRET: OAuth2 Client Secret
#   ⚠️ Required! Keep secure and never commit to version control!
CISCO_AI_CLIENT_SECRET=MzCIc9T5eSUAnB19-p8b2cmxUW3Oagd3XRLOf-3ZvaML_ZMKuE8RUkZaMfr31A__

# CISCO_AI_API_KEY: Application-specific API key
#   ⚠️ Required! Get from your Cisco AI administrator
CISCO_AI_API_KEY=egai-prd-cxpm-cxlx-usecases-improv-adopt-jrny-1

# CISCO_AI_API_VERSION: API version for compatibility
CISCO_AI_API_VERSION=2023-12-01-preview

# CISCO_AI_TOKEN_URL: OAuth2 token endpoint for Cisco identity
CISCO_AI_TOKEN_URL=https://id.cisco.com/oauth2/default/v1/token

# CISCO_AI_ENDPOINT: Cisco AI Gateway API endpoint
CISCO_AI_ENDPOINT=https://chat-ai.cisco.com

# -----------------------------------------------------------------------------
# Optional: OpenAI Configuration (if using OpenAI provider)
# -----------------------------------------------------------------------------
# OPENAI_API_KEY: Your OpenAI API key
# OPENAI_API_KEY=sk-...

# OPENAI_MODEL: OpenAI model to use (default: gpt-4o)
# OPENAI_MODEL=gpt-4o

# -----------------------------------------------------------------------------
# Optional: Google Gemini Configuration (if using Gemini provider)
# -----------------------------------------------------------------------------
# GEMINI_API_KEY: Your Google AI API key
# GEMINI_API_KEY=...

# GEMINI_MODEL: Gemini model to use
# GEMINI_MODEL=gemini-1.5-pro

# -----------------------------------------------------------------------------
# Optional: Anthropic Configuration (if using Anthropic provider)
# -----------------------------------------------------------------------------
# ANTHROPIC_API_KEY: Your Anthropic API key
# ANTHROPIC_API_KEY=sk-ant-...

# ANTHROPIC_MODEL: Anthropic model to use
# ANTHROPIC_MODEL=claude-3-5-sonnet-20241022

# -----------------------------------------------------------------------------
# Optional: Sentry Error Tracking
# -----------------------------------------------------------------------------
# SENTRY_DSN: Sentry Data Source Name for error reporting
# SENTRY_DSN=https://...

# SENTRY_ENVIRONMENT: Environment name for Sentry
# SENTRY_ENVIRONMENT=production
