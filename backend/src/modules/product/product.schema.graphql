# =============================================================================
# Product Module GraphQL Schema
# =============================================================================
# Defines the Product entity and related operations.
# Products are the core building blocks containing tasks, licenses, and outcomes.
# =============================================================================

"""
Product entity representing a software product with tasks and configurations.
Implements Node interface for Relay specification compliance.
"""
type Product implements Node {
  id: ID!
  name: String!
  resources: [Resource!]
  tasks(first: Int, after: String, last: Int, before: String): TaskConnection!
  statusPercent: Int!
  completionPercentage: Int!
  customAttrs: JSON
  solutions: [Solution!]!
  customers: [Customer!]!
  licenses: [License!]!
  outcomes: [Outcome!]!
  releases: [Release!]!
  tags: [ProductTag!]!
}

type ProductEdge {
  cursor: String!
  node: Product!
}

type ProductConnection {
  edges: [ProductEdge!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

input ProductInput {
  name: String!
  resources: [ResourceInput!]
  customAttrs: JSON
  licenseIds: [ID!]
}

"""
Available fields for sorting products
"""
enum ProductSortField {
  """Sort by product name alphabetically"""
  NAME
  """Sort by creation date"""
  CREATED_AT
  """Sort by last update date"""
  UPDATED_AT
}

"""
Sort direction for ordering results
"""
enum SortDirection {
  """Ascending order (A-Z, oldest first)"""
  ASC
  """Descending order (Z-A, newest first)"""
  DESC
}

"""
Input for specifying product sort order
"""
input ProductOrderByInput {
  """Field to sort by"""
  field: ProductSortField!
  """Sort direction"""
  direction: SortDirection!
}

extend type Query {
  product(id: ID!): Product
  products(
    first: Int
    after: String
    last: Int
    before: String
    """Sort order for results. Defaults to UPDATED_AT DESC if not specified."""
    orderBy: ProductOrderByInput
  ): ProductConnection!
}

extend type Mutation {
  createProduct(input: ProductInput!): Product!
  updateProduct(id: ID!, input: ProductInput!): Product!
  deleteProduct(id: ID!): Boolean!
}
