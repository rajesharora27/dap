# DAP Mac Demo Environment Configuration
# Lightweight production-style environment for local demos on macOS
# This file is synced to backend/.env when running ./dap start on Mac

NODE_ENV=production

# ============================================================================
# DATABASE - Uses local PostgreSQL (via Homebrew, no Docker needed)
# On macOS with Homebrew postgres, peer auth is used (no password required)
# NOTE: __MACUSER__ is replaced with your macOS username by ./dap start
# ============================================================================
DATABASE_URL=postgresql://__MACUSER__@localhost:5432/dap?schema=public&connection_limit=5
DB_PROVIDER=postgresql

# ============================================================================
# APPLICATION PORTS
# ============================================================================
PORT=4000
BACKEND_PORT=4000
BACKEND_HOST=0.0.0.0
FRONTEND_PORT=5173
FRONTEND_HOST=0.0.0.0
FRONTEND_URL=http://localhost:5173
BACKEND_URL=http://localhost:4000
GRAPHQL_ENDPOINT=http://localhost:4000/graphql

# ============================================================================
# AUTHENTICATION
# ============================================================================
# JWT_SECRET is auto-generated at seed time if not provided
JWT_SECRET=mac-demo-jwt-secret-change-if-needed
JWT_EXPIRES_IN=7d
SESSION_TIMEOUT=86400000

# ============================================================================
# FEATURE FLAGS (Demo-friendly settings)
# ============================================================================
SEED_DEFAULT_USERS=false
SEED_SAMPLE_DATA=false
DISABLE_AUTH=false
NO_AUTH=false
AUTH_FALLBACK=false
AUTH_BYPASS=false

# RBAC settings - strict for demo
RBAC_STRICT=true
RBAC_WARN=false
RBAC_AUTO_GRANT=false

# Database seeding - handled by seed-light-demo.ts
AUTO_SEED=false
SEED_ON_START=false
RESET_DB=false

# ============================================================================
# VITE / FRONTEND - Local development without subpath
# ============================================================================
VITE_BASE_PATH=/

# ============================================================================
# CORS - Allow localhost for demo
# ============================================================================
CORS_ORIGIN=http://localhost:5173,http://localhost:4000,http://127.0.0.1:5173

# ============================================================================
# RATE LIMITING - Relaxed for demo
# ============================================================================
RATE_LIMIT_ENABLED=false
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=10000
RATE_LIMIT_GRAPHQL_MAX=5000

# ============================================================================
# LOGGING
# ============================================================================
LOG_LEVEL=info
LOG_PRETTY=true

# ============================================================================
# FEATURES
# ============================================================================
GRAPHQL_PLAYGROUND=true
APOLLO_INTROSPECTION=true
ENABLE_CACHE=false
SHOW_DEV_MENU=false

# ============================================================================
# LLM / AI Agent (Optional - set your keys if using AI features)
# ============================================================================
# LLM_PROVIDER=openai
# OPENAI_API_KEY=your-key-here
# GEMINI_API_KEY=your-key-here

# ============================================================================
# TRUST PROXY (not needed for local demo)
# ============================================================================
TRUST_PROXY=false

